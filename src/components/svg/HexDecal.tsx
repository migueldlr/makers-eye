import { useState } from "react";

export default function HexDecal() {
  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);

  // Calculate opacity based on Y coordinate (bottom to top fade)
  const getOpacity = (dPath: string): number => {
    // Extract the center Y coordinate from the path
    // Format: "MX Y1LX Y2HX LX Y3LX Y4HX LX Y5Z"
    // The first Y value after M is the center Y coordinate
    const match = dPath.match(/M[\d.-]+\s+([\d.]+)/);
    if (!match) return 1;

    const y = parseFloat(match[1]);
    const minY = 0; // Top of SVG
    const maxY = 587; // Bottom of SVG (slightly beyond viewBox for full opacity at bottom)

    // Normalize Y to 0-1 range (0 = top, 1 = bottom)
    const normalized = (y - minY) / (maxY - minY);

    // Map to opacity: bottom (1) = opaque, top (0) = transparent
    // Using a smooth curve for better visual effect
    const opacity = Math.max(0.01, Math.min(1, normalized * 1.1));

    return opacity;
  };

  // Get the center point of a hexagon for transform-origin
  const getCenterPoint = (dPath: string): { x: number; y: number } => {
    const match = dPath.match(/M([\d.-]+)\s+([\d.]+)/);
    if (match) {
      return {
        x: parseFloat(match[1]),
        y: parseFloat(match[2]),
      };
    }
    return { x: 0, y: 0 };
  };

  const hexagons = [
    "M48.6936 543.267L61.1936 521.616H86.1936L98.6936 543.267L86.1936 564.918H61.1936L48.6936 543.267Z",
    "M48.6936 370.062L61.1936 348.411H86.1936L98.6936 370.062L86.1936 391.712H61.1936L48.6936 370.062Z",
    "M48.6936 456.665L61.1936 435.014H86.1936L98.6936 456.665L86.1936 478.315H61.1936L48.6936 456.665Z",
    "M48.6936 283.459L61.1936 261.808H86.1936L98.6936 283.459L86.1936 305.11H61.1936L48.6936 283.459Z",
    "M48.6936 196.856L61.1936 175.205H86.1936L98.6936 196.856L86.1936 218.507H61.1936L48.6936 196.856Z",
    "M48.6936 499.966L61.1936 478.315H86.1936L98.6936 499.966L86.1936 521.616H61.1936L48.6936 499.966Z",
    "M48.6936 326.76L61.1936 305.11H86.1936L98.6936 326.76L86.1936 348.411H61.1936L48.6936 326.76Z",
    "M48.6936 413.363L61.1936 391.713H86.1936L98.6936 413.363L86.1936 435.014H61.1936L48.6936 413.363Z",
    "M48.6936 240.158L61.1936 218.507H86.1936L98.6936 240.158L86.1936 261.808H61.1936L48.6936 240.158Z",
    "M48.6936 153.555L61.1936 131.904H86.1936L98.6936 153.555L86.1936 175.205H61.1936L48.6936 153.555Z",
    "M198.688 543.267L211.188 521.616H236.188L248.688 543.267L236.188 564.918H211.188L198.688 543.267Z",
    "M198.688 499.966L211.188 478.315H236.188L248.688 499.966L236.188 521.616H211.188L198.688 499.966Z",
    "M-26.3037 543.267L-13.8037 521.616H11.1963L23.6963 543.267L11.1963 564.918H-13.8037L-26.3037 543.267Z",
    "M-26.3037 370.062L-13.8037 348.411H11.1963L23.6963 370.062L11.1963 391.712H-13.8037L-26.3037 370.062Z",
    "M-26.3037 456.665L-13.8037 435.014H11.1963L23.6963 456.665L11.1963 478.315H-13.8037L-26.3037 456.665Z",
    "M-26.3037 283.459L-13.8037 261.808H11.1963L23.6963 283.459L11.1963 305.11H-13.8037L-26.3037 283.459Z",
    "M-26.3037 196.856L-13.8037 175.205H11.1963L23.6963 196.856L11.1963 218.507H-13.8037L-26.3037 196.856Z",
    "M-26.3037 110.254L-13.8037 88.6029H11.1963L23.6963 110.254L11.1963 131.904H-13.8037L-26.3037 110.254Z",
    "M-26.3037 499.966L-13.8037 478.315H11.1963L23.6963 499.966L11.1963 521.616H-13.8037L-26.3037 499.966Z",
    "M-26.3037 326.76L-13.8037 305.11H11.1963L23.6963 326.76L11.1963 348.411H-13.8037L-26.3037 326.76Z",
    "M-26.3037 413.363L-13.8037 391.713H11.1963L23.6963 413.363L11.1963 435.014H-13.8037L-26.3037 413.363Z",
    "M-26.3037 240.158L-13.8037 218.507H11.1963L23.6963 240.158L11.1963 261.808H-13.8037L-26.3037 240.158Z",
    "M-26.3037 153.555L-13.8037 131.904H11.1963L23.6963 153.555L11.1963 175.205H-13.8037L-26.3037 153.555Z",
    "M-26.3037 66.9523L-13.8037 45.3016H11.1963L23.6963 66.9523L11.1963 88.6029H-13.8037L-26.3037 66.9523Z",
    "M123.691 543.267L136.191 521.616H161.191L173.691 543.267L161.191 564.918H136.191L123.691 543.267Z",
    "M123.691 370.062L136.191 348.411H161.191L173.691 370.062L161.191 391.712H136.191L123.691 370.062Z",
    "M123.691 456.665L136.191 435.014H161.191L173.691 456.665L161.191 478.315H136.191L123.691 456.665Z",
    "M123.691 283.459L136.191 261.808H161.191L173.691 283.459L161.191 305.11H136.191L123.691 283.459Z",
    "M123.691 499.966L136.191 478.315H161.191L173.691 499.966L161.191 521.616H136.191L123.691 499.966Z",
    "M123.691 326.76L136.191 305.11H161.191L173.691 326.76L161.191 348.411H136.191L123.691 326.76Z",
    "M123.691 413.363L136.191 391.713H161.191L173.691 413.363L161.191 435.014H136.191L123.691 413.363Z",
    "M86.1923 564.918L98.6923 543.267H123.692L136.192 564.918L123.692 586.568H98.6923L86.1923 564.918Z",
    "M86.1923 391.712L98.6923 370.062H123.692L136.192 391.712L123.692 413.363H98.6923L86.1923 391.712Z",
    "M86.1923 478.315L98.6923 456.665H123.692L136.192 478.315L123.692 499.966H98.6923L86.1923 478.315Z",
    "M86.1923 305.11L98.6923 283.459H123.692L136.192 305.11L123.692 326.76H98.6923L86.1923 305.11Z",
    "M86.1923 521.616L98.6923 499.966H123.692L136.192 521.616L123.692 543.267H98.6923L86.1923 521.616Z",
    "M86.1923 348.411L98.6923 326.76H123.692L136.192 348.411L123.692 370.062H98.6923L86.1923 348.411Z",
    "M86.1923 435.014L98.6923 413.363H123.692L136.192 435.014L123.692 456.665H98.6923L86.1923 435.014Z",
    "M86.1923 261.808L98.6923 240.158H123.692L136.192 261.808L123.692 283.459H98.6923L86.1923 261.808Z",
    "M86.1923 218.507L98.6923 196.857H123.692L136.192 218.507L123.692 240.158H98.6923L86.1923 218.507Z",
    "M236.187 564.918L248.687 543.267H273.687L286.187 564.918L273.687 586.568H248.687L236.187 564.918Z",
    "M11.1949 564.918L23.6949 543.267H48.6949L61.1949 564.918L48.6949 586.568H23.6949L11.1949 564.918Z",
    "M11.1949 391.712L23.6949 370.062H48.6949L61.1949 391.712L48.6949 413.363H23.6949L11.1949 391.712Z",
    "M11.1949 478.315L23.6949 456.665H48.6949L61.1949 478.315L48.6949 499.966H23.6949L11.1949 478.315Z",
    "M11.1949 305.11L23.6949 283.459H48.6949L61.1949 305.11L48.6949 326.76H23.6949L11.1949 305.11Z",
    "M11.1949 218.507L23.6949 196.856H48.6949L61.1949 218.507L48.6949 240.157H23.6949L11.1949 218.507Z",
    "M11.1949 131.904L23.6949 110.254H48.6949L61.1949 131.904L48.6949 153.555H23.6949L11.1949 131.904Z",
    "M11.1949 521.616L23.6949 499.966H48.6949L61.1949 521.616L48.6949 543.267H23.6949L11.1949 521.616Z",
    "M11.1949 348.411L23.6949 326.76H48.6949L61.1949 348.411L48.6949 370.062H23.6949L11.1949 348.411Z",
    "M11.1949 435.014L23.6949 413.363H48.6949L61.1949 435.014L48.6949 456.665H23.6949L11.1949 435.014Z",
    "M11.1949 261.808L23.6949 240.158H48.6949L61.1949 261.808L48.6949 283.459H23.6949L11.1949 261.808Z",
    "M11.1949 175.205L23.6949 153.555H48.6949L61.1949 175.205L48.6949 196.856H23.6949L11.1949 175.205Z",
    "M11.1949 88.6029L23.6949 66.9523H48.6949L61.1949 88.6029L48.6949 110.254H23.6949L11.1949 88.6029Z",
    "M11.1949 45.3013L23.6949 23.6506H48.6949L61.1949 45.3013L48.6949 66.9519H23.6949L11.1949 45.3013Z",
    "M-26.3037 23.6506L-13.8037 2H11.1963L23.6963 23.6506L11.1963 45.3013H-13.8037L-26.3037 23.6506Z",
    "M161.19 564.918L173.69 543.267H198.69L211.19 564.918L198.69 586.568H173.69L161.19 564.918Z",
    "M161.19 391.712L173.69 370.062H198.69L211.19 391.712L198.69 413.363H173.69L161.19 391.712Z",
    "M161.19 478.315L173.69 456.665H198.69L211.19 478.315L198.69 499.966H173.69L161.19 478.315Z",
    "M161.19 521.616L173.69 499.966H198.69L211.19 521.616L198.69 543.267H173.69L161.19 521.616Z",
    "M161.19 435.014L173.69 413.363H198.69L211.19 435.014L198.69 456.665H173.69L161.19 435.014Z",
  ];

  return (
    <svg
      width="289"
      height="561"
      viewBox="0 0 289 561"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      {hexagons.map((d, index) => {
        const center = getCenterPoint(d);
        const isHovered = hoveredIndex === index;

        return (
          <path
            key={index}
            d={d}
            fill="#EB7108"
            fillOpacity={getOpacity(d)}
            stroke="#242424"
            strokeWidth="4"
            style={{
              transformOrigin: `${center.x}px ${center.y}px`,
              transform: isHovered ? "scale(1.15)" : "scale(1)",
              transition: "transform 0.2s ease-out",
              cursor: "pointer",
            }}
            onMouseEnter={() => setHoveredIndex(index)}
            onMouseLeave={() => setHoveredIndex(null)}
          />
        );
      })}
    </svg>
  );
}
