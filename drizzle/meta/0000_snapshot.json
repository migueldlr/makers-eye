{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.decklists": {
      "name": "decklists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "decklists_id_seq",
            "increment": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "startWith": "1",
            "cache": "1",
            "cycle": false,
            "schema": "public"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "cards": {
          "name": "cards",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "archetype": {
          "name": "archetype",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        },
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Enable update for authenticated users only": {
          "name": "Enable update for authenticated users only",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.tournaments": {
      "name": "tournaments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "tournaments_id_seq",
            "increment": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "startWith": "1",
            "cache": "1",
            "cycle": false,
            "schema": "public"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_modified_at": {
          "name": "last_modified_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "format": {
          "name": "format",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'sss'"
        },
        "abr_url": {
          "name": "abr_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cardpool": {
          "name": "cardpool",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Standard'"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        },
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.cards": {
      "name": "cards",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "cards_id_seq",
            "increment": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "startWith": "1",
            "cache": "1",
            "cycle": false,
            "schema": "public"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        },
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Enable update for authenticated users only": {
          "name": "Enable update for authenticated users only",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.standings": {
      "name": "standings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "standings_id_seq",
            "increment": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "startWith": "1",
            "cache": "1",
            "cycle": false,
            "schema": "public"
          }
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "tournament_id": {
          "name": "tournament_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "corp_wins": {
          "name": "corp_wins",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "corp_losses": {
          "name": "corp_losses",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "corp_draws": {
          "name": "corp_draws",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "corp_identity": {
          "name": "corp_identity",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "runner_wins": {
          "name": "runner_wins",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "runner_losses": {
          "name": "runner_losses",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "runner_draws": {
          "name": "runner_draws",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "runner_identity": {
          "name": "runner_identity",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "sos": {
          "name": "sos",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "e_sos": {
          "name": "e_sos",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "swiss_rank": {
          "name": "swiss_rank",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "top_cut_rank": {
          "name": "top_cut_rank",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "match_points": {
          "name": "match_points",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "corp_deck_id": {
          "name": "corp_deck_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_deck_id": {
          "name": "runner_deck_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "standings_tournament_id_fkey": {
          "name": "standings_tournament_id_fkey",
          "tableFrom": "standings",
          "tableTo": "tournaments",
          "schemaTo": "public",
          "columnsFrom": [
            "tournament_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        },
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Enable update for authenticated users only": {
          "name": "Enable update for authenticated users only",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.matches": {
      "name": "matches",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "matches_id_seq",
            "increment": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "startWith": "1",
            "cache": "1",
            "cycle": false,
            "schema": "public"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "tournament_id": {
          "name": "tournament_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "phase": {
          "name": "phase",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "round": {
          "name": "round",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "table": {
          "name": "table",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_id": {
          "name": "corp_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_id": {
          "name": "runner_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "matches_corp_id_fkey": {
          "name": "matches_corp_id_fkey",
          "tableFrom": "matches",
          "tableTo": "standings",
          "schemaTo": "public",
          "columnsFrom": [
            "corp_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matches_runner_id_fkey": {
          "name": "matches_runner_id_fkey",
          "tableFrom": "matches",
          "tableTo": "standings",
          "schemaTo": "public",
          "columnsFrom": [
            "runner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matches_tournament_id_fkey": {
          "name": "matches_tournament_id_fkey",
          "tableFrom": "matches",
          "tableTo": "tournaments",
          "schemaTo": "public",
          "columnsFrom": [
            "tournament_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        },
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.identity_names": {
      "name": "identity_names",
      "schema": "",
      "columns": {
        "long_id": {
          "name": "long_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "short_id": {
          "name": "short_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable read access for all users": {
          "name": "Enable read access for all users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.standings_mapped": {
      "name": "standings_mapped",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "tournament_id": {
          "name": "tournament_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_wins": {
          "name": "corp_wins",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_losses": {
          "name": "corp_losses",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_draws": {
          "name": "corp_draws",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_identity": {
          "name": "corp_identity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "runner_wins": {
          "name": "runner_wins",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_losses": {
          "name": "runner_losses",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_draws": {
          "name": "runner_draws",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_identity": {
          "name": "runner_identity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sos": {
          "name": "sos",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "e_sos": {
          "name": "e_sos",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "swiss_rank": {
          "name": "swiss_rank",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "top_cut_rank": {
          "name": "top_cut_rank",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "match_points": {
          "name": "match_points",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_short_id": {
          "name": "corp_short_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "runner_short_id": {
          "name": "runner_short_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "corp_deck_id": {
          "name": "corp_deck_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "runner_deck_id": {
          "name": "runner_deck_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT standings.id, standings.name, standings.created_at, standings.tournament_id, standings.corp_wins, standings.corp_losses, standings.corp_draws, standings.corp_identity, standings.runner_wins, standings.runner_losses, standings.runner_draws, standings.runner_identity, standings.sos, standings.e_sos, standings.swiss_rank, standings.top_cut_rank, standings.match_points, corp_short_ids.short_id AS corp_short_id, runner_short_ids.short_id AS runner_short_id, standings.corp_deck_id, standings.runner_deck_id FROM standings LEFT JOIN identity_names corp_short_ids ON corp_short_ids.long_id = standings.corp_identity LEFT JOIN identity_names runner_short_ids ON runner_short_ids.long_id = standings.runner_identity",
      "materialized": false,
      "with": {
        "securityInvoker": "on"
      }
    },
    "public.matches_mapped": {
      "name": "matches_mapped",
      "schema": "public",
      "columns": {
        "tournament_id": {
          "name": "tournament_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "phase": {
          "name": "phase",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "round": {
          "name": "round",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "table": {
          "name": "table",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_short_id": {
          "name": "corp_short_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "runner_short_id": {
          "name": "runner_short_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "runner_id": {
          "name": "runner_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "corp_id": {
          "name": "corp_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "WITH mapped_standings AS ( SELECT standings.id, standings.name, standings.created_at, standings.tournament_id, standings.corp_wins, standings.corp_losses, standings.corp_draws, standings.corp_identity, standings.runner_wins, standings.runner_losses, standings.runner_draws, standings.runner_identity, standings.sos, standings.e_sos, standings.swiss_rank, standings.top_cut_rank, standings.match_points, corp_short_ids.short_id AS corp_short_id, runner_short_ids.short_id AS runner_short_id FROM standings LEFT JOIN identity_names corp_short_ids ON corp_short_ids.long_id = standings.corp_identity LEFT JOIN identity_names runner_short_ids ON runner_short_ids.long_id = standings.runner_identity ) SELECT matches.tournament_id, matches.phase, matches.round, matches.\"table\", corp_standings.corp_short_id, runner_standings.runner_short_id, matches.result, matches.runner_id, matches.corp_id FROM matches LEFT JOIN mapped_standings corp_standings ON matches.corp_id = corp_standings.id LEFT JOIN mapped_standings runner_standings ON matches.runner_id = runner_standings.id",
      "materialized": false,
      "with": {
        "securityInvoker": "on"
      }
    },
    "public.tournaments_with_player_count": {
      "name": "tournaments_with_player_count",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_modified_at": {
          "name": "last_modified_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "format": {
          "name": "format",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "abr_url": {
          "name": "abr_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cardpool": {
          "name": "cardpool",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "player_count": {
          "name": "player_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT t.id, t.created_at, t.last_modified_at, t.name, t.url, t.meta, t.date, t.location, t.region, t.format, t.abr_url, t.cardpool, COALESCE(player_counts.player_count, 0::bigint) AS player_count FROM tournaments t LEFT JOIN ( SELECT standings_mapped.tournament_id, count(DISTINCT standings_mapped.name) AS player_count FROM standings_mapped GROUP BY standings_mapped.tournament_id) player_counts ON t.id = player_counts.tournament_id",
      "materialized": false,
      "with": {
        "securityInvoker": "on"
      }
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {
      "standings": {
        "columns": {
          "corp_wins": {
            "isDefaultAnExpression": true
          },
          "corp_losses": {
            "isDefaultAnExpression": true
          },
          "corp_draws": {
            "isDefaultAnExpression": true
          },
          "runner_wins": {
            "isDefaultAnExpression": true
          },
          "runner_losses": {
            "isDefaultAnExpression": true
          },
          "runner_draws": {
            "isDefaultAnExpression": true
          },
          "swiss_rank": {
            "isDefaultAnExpression": true
          }
        }
      }
    }
  }
}